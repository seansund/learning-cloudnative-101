(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{pDAk:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return s}));var o=n("wx14"),a=n("zLVn"),b=(n("q1tI"),n("7ljp")),l=n("013z"),c=(n("qKvR"),{}),i={_frontmatter:c},r=l.a;function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(b.b)(r,Object(o.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("h2",null,"Problem"),Object(b.b)("p",null,"Your commander has a simple data process that is run periodically to check status. They would like to stop doing this manually in order to save time, so you have been asked to implement a cron job in the Kubernetes cluster to run this process. "),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"Create a cron job called xwing-cronjob using the ",Object(b.b)("inlineCode",{parentName:"li"},"ibmcase/xwing-status:1.0")," image. "),Object(b.b)("li",{parentName:"ul"},"Have the job run every second minute with the following cron expression: ",Object(b.b)("inlineCode",{parentName:"li"},"*/2 * * * *"),"."),Object(b.b)("li",{parentName:"ul"},"Pass the argument ",Object(b.b)("inlineCode",{parentName:"li"},"/usr/sbin/xwing-status.sh")," to the container.")),Object(b.b)("h2",null,"Verification"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"Run ",Object(b.b)("inlineCode",{parentName:"li"},"kubectl get cronjobs.batch")," and ",Object(b.b)("inlineCode",{parentName:"li"},"LAST-SCHEDULE")," to see last time it ran"),Object(b.b)("li",{parentName:"ul"},"From a bash shell, run the following to see the logs for all jobs:")),Object(b.b)("pre",null,Object(b.b)("code",Object(o.a)({parentName:"pre"},{}),'jobs=( $(kubectl get jobs --no-headers -o custom-columns=":metadata.name") )\necho -e "Job \\t\\t\\t\\t Pod \\t\\t\\t\\t\\tLog"\nfor job in "${jobs[@]}"\ndo\n   pod=$(kubectl get pods -l job-name=$job --no-headers -o custom-columns=":metadata.name")\n   echo -en "$job \\t $pod \\t"\n   kubectl logs $pod\ndone\n')))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-lectures-kube-overview-activities-labs-lab-7-index-mdx-4f8e604a991c8ac70719.js.map