{"componentChunkName":"component---src-pages-electives-monitoring-sysdig-activities-alerts-index-mdx","path":"/electives/monitoring/sysdig/activities/alerts/","result":{"pageContext":{"frontmatter":{"title":"Sysdig Alerts","description":"Lab to show how to work with alerts"},"relativePagePath":"/electives/monitoring/sysdig/activities/alerts/index.mdx","titleType":"page","MdxNode":{"id":"da94bcc1-72a5-59be-9511-6afc6cc16a1f","children":[],"parent":"fd3efab0-d784-52a7-8a70-68cf01c1c77e","internal":{"content":"---\ntitle: Sysdig Alerts\ndescription: Lab to show how to work with alerts\n---\n\n\n### Prerequisite\n- Configure Dashboards following the lab [here](/monitoring/sysdig/#activities)\n\n\n## Create Email Notification Channel\n- Open Sysdig\n- Go to Settings\n- Select \"Notifications Channel\"\n- Click \"Add Notification Channel\"\n- Select Email\n- Enter email address, this can be a functional id\n- Enter a Channel name this will be use when setting up channels `production-web-service-sev-high-email`\n\n![email-channel](./images/email-channel.png)\n\n## Create Slack Notification Channel\n- Open Sysdig\n- Go to Settings\n- Select \"Notifications Channel\"\n- Click \"Add Notification Channel\"\n- Select Slack\n- Enter Slack Incoming Webook URL. You can create a free slack workspaces for testing purposes for this lab. Once you have a Slack workspace you can create a Slack App with Incomig webhook [here](https://api.slack.com/messaging/webhooks)\n- Enter a Channel name this will be use when setting up channels `production-web-service-sev-high-slack`. This is not the Slack Channel, is a \"Sysdig\" Alert Channel.\n\n![slack-channel](./images/slack-channel.png)\n\n\n## Create Alert for HTTP errors\n- Open Sysdig\n- Select Alerts\n- On the top right search box type `HTTP`\n- Select `[Kubernetes] Service generating HTTP errors`\n\n![find-alert-http-errors](./images/find-alert-http-errors.png)\n\n- Click COPY\n- Select defaults settings, click Copy and Open, click Save\n- Click to open the new copy Alert `[Kubernetes] Service generating HTTP errors (1)`\n- Rename it to `[Production][My Web Service] HTTP errors`\n- Change to High\n- Edit Scope\n    - `kubernetes.namespace.name` in `production`\n    - `kubernetes.service.name` in `my-web-app`\n- Edit Trigger \n    - To make it trigger faster for demo purposes set to metric `>` `1` for `1 minute`\n- Enable Notification Channels\n    - Enable Email `production-web-service-sev-high-email`\n    - Enable Slack `production-web-service-sev-high-slack`\n- Click Save\n- Enable the Alert\n\n![create-alert](./images/alert-config-1.png)\n\n## Trigger an Alert with HTTP errors\n- Simulate HTTP Errors by calling the web service with the following command.\n```shell\nwhile true; do sleep 0.1; curl http://localhost:8081/status/500 -si | head -1 ; done\n```\n- Go to the dashboard `Kubernetes Service Golder Signals - My Web Service` select a 10S time window and Maximize the panel `Error Rate (4xx/5xx) per Service`\n\n![5xx-errors](./images/5xx-errors.png)\n\n- You can see that the problem was detected and an alert triggered.\n\n## Receiving Alert Notifications\n\n- Slack Notification is received alerting about the http errors\n\n![slack-alert](./images/slack-alert.png)\n\n- Email Notification is received alerting about the http errors\n\n![email-alert](./images/email-alert.png)\n\n## Receiving Resolution Notifications\n\n- Stop the HTTP Error simulation, and the system will send another notificatoon about the resolution\n\n- Another Slack Notification is received when the problem is resolved\n\n![slack-resolved](./images/slack-resolved.png)\n\n- Another Email Notification is received when the problem is resolved\n\n![slack-resolved](./images/email-resolved.png)\n\n- You can see in the Golden Signal Dashboard for Error Rate that rates go back to zero\n\n![5xx-resolved](./images/5xx-resolved.png)\n\n## Events \n\n- To see all events collected click Events on Sysdig\n\n![events](./images/events-view.png)\n","type":"Mdx","contentDigest":"c368764c55e2e4b1c2032725940aec54","counter":615,"owner":"gatsby-plugin-mdx"},"exports":[],"rawBody":"---\ntitle: Sysdig Alerts\ndescription: Lab to show how to work with alerts\n---\n\n\n### Prerequisite\n- Configure Dashboards following the lab [here](/monitoring/sysdig/#activities)\n\n\n## Create Email Notification Channel\n- Open Sysdig\n- Go to Settings\n- Select \"Notifications Channel\"\n- Click \"Add Notification Channel\"\n- Select Email\n- Enter email address, this can be a functional id\n- Enter a Channel name this will be use when setting up channels `production-web-service-sev-high-email`\n\n![email-channel](./images/email-channel.png)\n\n## Create Slack Notification Channel\n- Open Sysdig\n- Go to Settings\n- Select \"Notifications Channel\"\n- Click \"Add Notification Channel\"\n- Select Slack\n- Enter Slack Incoming Webook URL. You can create a free slack workspaces for testing purposes for this lab. Once you have a Slack workspace you can create a Slack App with Incomig webhook [here](https://api.slack.com/messaging/webhooks)\n- Enter a Channel name this will be use when setting up channels `production-web-service-sev-high-slack`. This is not the Slack Channel, is a \"Sysdig\" Alert Channel.\n\n![slack-channel](./images/slack-channel.png)\n\n\n## Create Alert for HTTP errors\n- Open Sysdig\n- Select Alerts\n- On the top right search box type `HTTP`\n- Select `[Kubernetes] Service generating HTTP errors`\n\n![find-alert-http-errors](./images/find-alert-http-errors.png)\n\n- Click COPY\n- Select defaults settings, click Copy and Open, click Save\n- Click to open the new copy Alert `[Kubernetes] Service generating HTTP errors (1)`\n- Rename it to `[Production][My Web Service] HTTP errors`\n- Change to High\n- Edit Scope\n    - `kubernetes.namespace.name` in `production`\n    - `kubernetes.service.name` in `my-web-app`\n- Edit Trigger \n    - To make it trigger faster for demo purposes set to metric `>` `1` for `1 minute`\n- Enable Notification Channels\n    - Enable Email `production-web-service-sev-high-email`\n    - Enable Slack `production-web-service-sev-high-slack`\n- Click Save\n- Enable the Alert\n\n![create-alert](./images/alert-config-1.png)\n\n## Trigger an Alert with HTTP errors\n- Simulate HTTP Errors by calling the web service with the following command.\n```shell\nwhile true; do sleep 0.1; curl http://localhost:8081/status/500 -si | head -1 ; done\n```\n- Go to the dashboard `Kubernetes Service Golder Signals - My Web Service` select a 10S time window and Maximize the panel `Error Rate (4xx/5xx) per Service`\n\n![5xx-errors](./images/5xx-errors.png)\n\n- You can see that the problem was detected and an alert triggered.\n\n## Receiving Alert Notifications\n\n- Slack Notification is received alerting about the http errors\n\n![slack-alert](./images/slack-alert.png)\n\n- Email Notification is received alerting about the http errors\n\n![email-alert](./images/email-alert.png)\n\n## Receiving Resolution Notifications\n\n- Stop the HTTP Error simulation, and the system will send another notificatoon about the resolution\n\n- Another Slack Notification is received when the problem is resolved\n\n![slack-resolved](./images/slack-resolved.png)\n\n- Another Email Notification is received when the problem is resolved\n\n![slack-resolved](./images/email-resolved.png)\n\n- You can see in the Golden Signal Dashboard for Error Rate that rates go back to zero\n\n![5xx-resolved](./images/5xx-resolved.png)\n\n## Events \n\n- To see all events collected click Events on Sysdig\n\n![events](./images/events-view.png)\n","frontmatter":{"title":"Sysdig Alerts","description":"Lab to show how to work with alerts"},"fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/learning-cloudnative-101/src/pages/electives/monitoring/sysdig/activities/alerts/index.mdx"}}},"staticQueryHashes":["1364590287","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","63531786","63531786","768070550"]}