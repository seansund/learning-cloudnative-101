{"version":3,"sources":["webpack:///./src/pages/lectures/kube-configuration/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","AnchorLinks","AnchorLink","Tabs","Tab","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","small","parentName","label","isMDXComponent"],"mappings":"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","file":"component---src-pages-lectures-kube-configuration-index-mdx-d188eccbbf3b8e1bd61f.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/ibm-cloud-architecture/learning-cloudnative-101/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Container Configuration</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Resource Requirements</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">ConfigMaps</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Secrets</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">SecurityContexts</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Service Accounts</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Activities</AnchorLink>\n    </AnchorLinks>\n    <h1>{`Container Configuration`}</h1>\n    <p><strong parentName=\"p\">{`Command and Argument`}</strong></p>\n    <p>{`When you create a Pod, you can define a command and arguments for the containers that run in the Pod.`}</p>\n    <p>{`The command and arguments that you define in the configuration file override the default command and arguments provided by the container image`}</p>\n    <p>{`Dockerfile vs Kubernetes\nDockerfile Entrypoint -> k8s command\nDockerfile CMD -> k8s args`}</p>\n    <p><strong parentName=\"p\">{`Ports`}</strong></p>\n    <p>{`When you create a Pod, you can specify the port number the container exposes, as best practice is good to put a `}<inlineCode parentName=\"p\">{`name`}</inlineCode>{`, this way a service can specify targetport by name reference.`}</p>\n    <p><strong parentName=\"p\">{`Environment Variable`}</strong></p>\n    <p>{`When you create a Pod, you can set environment variables for the containers that run in the Pod. To set environment variables, include the env or envFrom field in the container configuration`}</p>\n    <p>{`A Pod can use environment variables to expose information about itself to Containers running in the Pod. Environment variables can expose Pod fields and Container fields`}</p>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`IKS & OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/\"\n        }}>{`Container Commands`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/\"\n        }}>{`Environment Variables`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/#exposing-pods-to-the-cluster\"\n        }}>{`Pod Exposing`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-cmd-pod\nspec:\n  containers:\n  - name: myapp-container\n    image: busybox\n    command: ['echo']\n  restartPolicy: Never\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-arg-pod\nspec:\n  containers:\n  - name: myapp-container\n    image: busybox\n    command: ['echo']\n    args: ['Hello World']\n  restartPolicy: Never\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-port-pod\nspec:\n  containers:\n  - name: myapp-container\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-env-pod\nspec:\n  restartPolicy: Never\n  containers:\n  - name: c\n    image: busybox\n    env:\n    - name: DEMO_GREETING\n      value: \"Hello from the environment\"\n    command: [\"echo\"]\n    args: [\"$(DEMO_GREETING)\"]\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-inter-pod\n  labels:\n    app: jedi\nspec:\n  restartPolicy: Never\n  containers:\n    - name: myapp\n      image: bitnami/nginx\n      ports:\n        - containerPort: 8080\n          name: http\n      env:\n        - name: MY_NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: spec.nodeName\n        - name: MY_POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: MY_POD_IP\n          valueFrom:\n            fieldRef:\n              fieldPath: status.podIP\n      command: [\"echo\"]\n      args: [\"$(MY_NODE_NAME) $(MY_POD_NAME) $(MY_POD_IP)\"]\n`}</code></pre>\n    <h1>{`Resource Requirements`}</h1>\n    <p>{`When you specify a Pod, you can optionally specify how much CPU and memory (RAM) each Container needs. When Containers have resource requests specified, the scheduler can make better decisions about which nodes to place Pods on.`}</p>\n    <p>{`CPU and memory are each a resource type. A resource type has a base unit. CPU is specified in units of cores, and memory is specified in units of bytes.`}</p>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`IKS & OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container\"\n        }}>{`Compute Resources`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/\"\n        }}>{`Memory Management`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  containers:\n  - name: my-app\n    image: bitnami/nginx\n    ports:\n      - containerPort: 8080\n    resources:\n      requests:\n        memory: \"64Mi\"\n        cpu: \"250m\"\n      limits:\n        memory: \"128Mi\"\n        cpu: \"500m\"\n`}</code></pre>\n    <p>{`Namespaced defaults mem`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: LimitRange\nmetadata:\n  name: mem-limit-range\nspec:\n  limits:\n  - default:\n      memory: 512Mi\n    defaultRequest:\n      memory: 256Mi\n    type: Container\n`}</code></pre>\n    <p>{`Namespaced defaults mem`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: LimitRange\nmetadata:\n  name: cpu-limit-range\nspec:\n  limits:\n  - default:\n      cpu: 1\n    defaultRequest:\n      cpu: 0.5\n    type: Container\n`}</code></pre>\n    <h1>{`ConfigMaps`}</h1>\n    <p>{`ConfigMaps allow you to decouple configuration artifacts from image content to keep containerized applications portable.`}</p>\n    <p>{`You can data from a ConfigMap in 3 different ways.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`As a single environment variable specific to a single key`}</li>\n      <li parentName=\"ul\">{`As a set of environment variables from all keys`}</li>\n      <li parentName=\"ul\">{`As a set of files, each key represented by a file on mounted volume`}</li>\n    </ul>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/nodes/containers/nodes-containers-projected-volumes.html\"\n        }}>{`Mapping Volumes`}</a></li>\n    </ul>\n    <p><strong parentName=\"p\">{`IKS`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/\"\n        }}>{`ConfigMaps`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: ConfigMap\nmetadata:\n   name: my-cm\ndata:\n   color: blue\n   location: naboo\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  restartPolicy: Never\n  containers:\n    - name: myapp\n      image: busybox\n      command: [\"echo\"]\n      args: [\"color is $(MY_VAR)\"]\n      env:\n        - name: MY_VAR\n          valueFrom:\n            configMapKeyRef:\n              name: my-cm\n              key: color\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  restartPolicy: Never\n  containers:\n    - name: myapp\n      image: busybox\n      command:\n        [\n          \"sh\",\n          \"-c\",\n          \"ls -l /etc/config; echo located at $(cat /etc/config/location)\",\n        ]\n      volumeMounts:\n        - name: config-volume\n          mountPath: /etc/config\n  volumes:\n    - name: config-volume\n      configMap:\n        name: my-cm\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  restartPolicy: Never\n  containers:\n    - name: myapp\n      image: busybox\n      command: [\"/bin/sh\", \"-c\", \"env | sort\"]\n      envFrom:\n        - configMapRef:\n            name: my-cm\n  restartPolicy: Never\n`}</code></pre>\n    <h1>{`Secrets`}</h1>\n    <p>{`Kubernetes secret objects let you store and manage sensitive information, such as passwords, OAuth tokens, and ssh keys. Putting this information in a secret is safer and more flexible than putting it verbatim in a Pod definition or in a container image.`}</p>\n    <p>{`A Secret is an object that contains a small amount of sensitive data such as a password, a token, or a key. Such information might otherwise be put in a Pod specification or in an image; putting it in a Secret object allows for more control over how it is used, and reduces the risk of accidental exposure.`}</p>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/nodes/containers/nodes-containers-projected-volumes.html\"\n        }}>{`Secrets`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/cli_reference/openshift_cli/developer-cli-commands.html#secrets\"\n        }}>{`Secret Commands`}</a></li>\n    </ul>\n    <p><strong parentName=\"p\">{`IKS`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/concepts/configuration/secret/\"\n        }}>{`Secrets`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/inject-data-application/distribute-credentials-secure/\"\n        }}>{`Secret Distribution`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Secret\nmetadata:\n  name: mysecret\ntype: Opaque\ndata:\n  username: YWRtaW4=\nstringData:\n  admin: administrator\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Secret\nmetadata:\n  name: mysecret-config\ntype: Opaque\nstringData:\n  config.yaml: |-\n    apiUrl: \"https://my.api.com/api/v1\"\n    username: token\n    password: thesecrettoken\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  containers:\n  - name: my-app\n    image: bitnami/nginx\n    ports:\n      - containerPort: 8080\n    env:\n      - name: SECRET_USERNAME\n        valueFrom:\n          secretKeyRef:\n            name: mysecret\n            key: username\n    envFrom:\n      - secretRef:\n          name: mysecret\n    volumeMounts:\n      - name: config\n        mountPath: \"/etc/secrets\"\n  volumes:\n    - name: config\n      secret:\n        secretName: mysecret-config\n`}</code></pre>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"OpenShift\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Create files needed for rest of example.`}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`echo -n 'admin' > ./username.txt\necho -n '1f2d1e2e67df' > ./password.txt\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Creating Secret from files. `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc create secret generic db-user-pass --from-file=./username.txt --from-file=./password.txt\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Getting Secret `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc get secrets\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Gets the Secret’s Description. `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc describe secrets/db-user-pass\n`}</code></pre>\n      </Tab>\n      <Tab label=\"IKS\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Create files needed for rest of example. `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`echo -n 'admin' > ./username.txt\necho -n '1f2d1e2e67df' > ./password.txt\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Creates the Secret from the files `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl create secret generic db-user-pass --from-file=./username.txt --from-file=./password.txt\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Gets the Secret `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl get secrets\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Gets the Secret’s Description. `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl describe secrets/db-user-pass\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h1>{`SecurityContexts`}</h1>\n    <p>{`A security context defines privilege and access control settings for a Pod or Container.`}</p>\n    <p>{`To specify security settings for a Pod, include the securityContext field in the Pod specification. The securityContext field is a PodSecurityContext object. The security settings that you specify for a Pod apply to all Containers in the Pod.`}</p>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/authentication/managing-security-context-constraints.html\"\n        }}>{`Managing Security Contexts`}</a></li>\n    </ul>\n    <p><strong parentName=\"p\">{`IKS`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/configure-pod-container/security-context/\"\n        }}>{`Security Contexts`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <p>{`Setup minikube VM with users`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`minikube ssh\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`su -\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{}}>{`echo \"container-user-0:x:2000:2000:-:/home/container-user-0:/bin/bash\" >> /etc/passwd\necho \"container-user-1:x:2001:2001:-:/home/container-user-1:/bin/bash\" >> /etc/passwd\necho \"container-group-0:x:3000:\" >>/etc/group\necho \"container-group-1:x:3001:\" >>/etc/group\nmkdir -p /etc/message/\necho \"Hello, World!\" | sudo tee -a /etc/message/message.txt\nchown 2000:3000 /etc/message/message.txt\nchmod 640 /etc/message/message.txt\n`}</code></pre>\n    <p>{`Using the this `}<inlineCode parentName=\"p\">{`securityContext`}</inlineCode>{` the container will be able to read the file `}<inlineCode parentName=\"p\">{`/message/message.txt`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-securitycontext-pod\nspec:\n  restartPolicy: Never\n  securityContext:\n    runAsUser: 2000\n    runAsGroup: 3000\n    fsGroup: 3000\n  containers:\n    - name: myapp-container\n      image: busybox\n      command: [\"sh\", \"-c\", \"cat /message/message.txt && sleep 3600\"]\n      volumeMounts:\n        - name: message-volume\n          mountPath: /message\n  volumes:\n    - name: message-volume\n      hostPath:\n        path: /etc/message\n`}</code></pre>\n    <p>{`Using the this `}<inlineCode parentName=\"p\">{`securityContext`}</inlineCode>{` the container should NOT be able to read the file `}<inlineCode parentName=\"p\">{`/message/message.txt`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-securitycontext-pod\nspec:\n  restartPolicy: Never\n  securityContext:\n    runAsUser: 2001\n    runAsGroup: 3001\n    fsGroup: 3001\n  containers:\n    - name: myapp-container\n      image: busybox\n      command: [\"sh\", \"-c\", \"cat /message/message.txt && sleep 3600\"]\n      volumeMounts:\n        - name: message-volume\n          mountPath: /message\n  volumes:\n    - name: message-volume\n      hostPath:\n        path: /etc/message\n`}</code></pre>\n    <p><strong parentName=\"p\">{` Run to see the errors `}</strong></p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"OpenShift\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Get Pod Logs `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc logs my-securitycontext-pod\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Should return `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`cat: can't open '/message/message.txt': Permission denied\n`}</code></pre>\n      </Tab>\n      <Tab label=\"IKS\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Get Pod Logs `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl logs my-securitycontext-pod\n`}</code></pre>\n        <p><strong parentName=\"p\">{` Should return `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`cat: can't open '/message/message.txt': Permission denied\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h1>{`Service Accounts`}</h1>\n    <p>{`A service account provides an identity for processes that run in a Pod.`}</p>\n    <p>{`When you (a human) access the cluster (for example, using kubectl), you are authenticated by the apiserver as a particular User Account (currently this is usually admin, unless your cluster administrator has customized your cluster). Processes in containers inside pods can also contact the apiserver. When they do, they are authenticated as a particular Service Account (for example, default).`}</p>\n    <p>{`User accounts are for humans. Service accounts are for processes, which run in pods.`}</p>\n    <p>{`User accounts are intended to be global. Names must be unique across all namespaces of a cluster, future user resource will not be namespaced. Service accounts are namespaced.`}</p>\n    <h2>{`Resources`}</h2>\n    <p><strong parentName=\"p\">{`OpenShift`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/authentication/understanding-and-creating-service-accounts.html\"\n        }}>{`Service Accounts`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://docs.openshift.com/container-platform/4.3/authentication/using-service-accounts-in-applications.html\"\n        }}>{`Using Service Accounts`}</a></li>\n    </ul>\n    <p><strong parentName=\"p\">{`IKS`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/\"\n        }}>{`Service Accounts`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/\"\n        }}>{`Service Account Configuration`}</a></li>\n    </ul>\n    <h2>{`References`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: my-service-account\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\nspec:\n  serviceAccountName: my-service-account\n  containers:\n  - name: my-app\n    image: bitnami/nginx\n    ports:\n      - containerPort: 8080\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: v1\nkind: Secret\nmetadata:\n  name: build-robot-secret\n  annotations:\n    kubernetes.io/service-account.name: my-service-account\ntype: kubernetes.io/service-account-token\n`}</code></pre>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"OpenShift\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Creating a ServiceAccount`}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc create sa <service_account_name>\n`}</code></pre>\n        <p><strong parentName=\"p\">{` View ServiceAccount Details `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`oc describe sa <service_account_name>\n`}</code></pre>\n      </Tab>\n      <Tab label=\"IKS\" mdxType=\"Tab\">\n        <p><strong parentName=\"p\">{` Create a ServiceAccount `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl create sa <service_account_name>\n`}</code></pre>\n        <p><strong parentName=\"p\">{` View ServiceAccount Details `}</strong></p>\n        <pre><code parentName=\"pre\" {...{}}>{`kubectl describe sa <service_account_name>\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h2>{`Activities`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Task`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"left\"\n          }}>{`Link`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\"><em parentName=\"strong\">{` Try It Yourself `}</em></strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"left\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Pod Creation`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Challenge yourself to create a Pod YAML file to meet certain parameters.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"left\"\n          }}><a parentName=\"td\" {...{\n              \"href\": \"../kube-overview/activities/labs/lab1\"\n            }}>{`Pod Creation`}</a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Pod Configuration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Configure a pod to meet compute resource requirements.`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"left\"\n          }}><a parentName=\"td\" {...{\n              \"href\": \"../kube-overview/activities/labs/lab2\"\n            }}>{`Pod Configuration`}</a></td>\n        </tr>\n      </tbody>\n    </table>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}